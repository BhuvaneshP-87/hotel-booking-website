pipeline{
    agent any
    tools {nodejs "Ease-Rooms"}

    stages{
        stage('Compile Stage'){
            steps{
                bat 'npm install'
                bat 'npm i package.json'
            }
        }

        // stage('Testing'){
        //         options {
        //             timeout(time: 20, unit: 'SECONDS') 
        //         }
        //     steps{
        //         parallel(
        //             a:{
        //                 bat 'node app.js'
        //             },
        //             b:{
        //                 bat 'npm test'
        //             }
        //         )
        //     }
        // }

        stage('Deploying'){
            steps{
                // bat 'git push heroku master'
                bat 'npm install -g heroku'
                bat 'heroku login'
                bat 'heroku git:clone -a cryptic-castle-55044'
                bat 'cd cryptic-castle-55044'
                bat 'git add .'
                bat 'git commit -am "make it better"'
                bat 'git push heroku master'
            }
        }


    }
}